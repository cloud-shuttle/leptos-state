<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Debug Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 2rem;
            background-color: #f8fafc;
        }
        .debug-info {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            margin-bottom: 1rem;
        }
        .status {
            padding: 0.5rem;
            border-radius: 0.25rem;
            margin: 0.5rem 0;
        }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fef2f2; color: #dc2626; }
        .warning { background: #fef3c7; color: #d97706; }
    </style>
</head>
<body>
    <h1>üß™ Component Debug Test</h1>
    
    <div class="debug-info">
        <h3>Debug Information</h3>
        <div id="debug-output"></div>
    </div>
    
    <div id="app">
        <p>Component will mount here...</p>
    </div>

    <script type="module">
        const debugOutput = document.getElementById('debug-output');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            debugOutput.appendChild(div);
            console.log(message);
        }
        
        async function runDebugTest() {
            try {
                log('Starting debug test...', 'success');
                
                // Test 1: Check if WASM is available
                log('Testing WASM availability...', 'warning');
                if (typeof WebAssembly === 'undefined') {
                    throw new Error('WebAssembly not supported');
                }
                log('‚úÖ WebAssembly is supported', 'success');
                
                // Test 2: Try to import the WASM module
                log('Attempting to import WASM module...', 'warning');
                const wasmModule = await import('./pkg/todo_app.js');
                log('‚úÖ WASM module imported successfully', 'success');
                
                // Test 3: Check if main function exists
                log('Checking for main function...', 'warning');
                if (typeof wasmModule.main !== 'function') {
                    throw new Error('main function not found in WASM module');
                }
                log('‚úÖ main function found', 'success');
                
                // Test 4: Initialize WASM
                log('Initializing WASM...', 'warning');
                await wasmModule.default();
                log('‚úÖ WASM initialized', 'success');
                
                // Test 5: Try to mount component
                log('Attempting to mount component...', 'warning');
                wasmModule.main();
                log('‚úÖ Component mounting attempted', 'success');
                
                // Test 6: Check if DOM was modified
                setTimeout(() => {
                    const appDiv = document.getElementById('app');
                    if (appDiv.children.length > 1) {
                        log('‚úÖ DOM content detected - component likely mounted', 'success');
                    } else {
                        log('‚ö†Ô∏è No DOM changes detected - component may not have mounted', 'warning');
                    }
                }, 1000);
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
                console.error('Debug test failed:', error);
            }
        }
        
        // Run the debug test
        runDebugTest();
    </script>
</body>
</html>
